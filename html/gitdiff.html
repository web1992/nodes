<!DOCTYPE html>

<html>
  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="dist/diff2html.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.js"></script>
  <!-- Javascripts -->
  <script type="text/javascript" src="dist/diff2html.js"></script>
  <script type="text/javascript" src="dist/diff2html-ui.js"></script>

  <script type="text/javascript">
    // or

    var diffJson = [
      {
        blocks: [
          {
            lines: [
              {
                content: " const SUC = '1';",
                type: "d2h-cntx",
                oldNumber: 7,
                newNumber: 7
              },
              { content: " ", type: "d2h-cntx", oldNumber: 8, newNumber: 8 },
              { content: " ", type: "d2h-cntx", oldNumber: 9, newNumber: 9 },
              { content: "-", type: "d2h-del", oldNumber: 10, newNumber: null },
              {
                content: " /* GET checkUser. */",
                type: "d2h-cntx",
                oldNumber: 11,
                newNumber: 10
              },
              {
                content: " router.get('/', function (req, res, next) {",
                type: "d2h-cntx",
                oldNumber: 12,
                newNumber: 11
              },
              {
                content:
                  "     res.setHeader('Content-Type', 'application/json');",
                type: "d2h-cntx",
                oldNumber: 13,
                newNumber: 12
              },
              {
                content:
                  "-    res.send(JSON.stringify({ code: 200, msg: 'ok', data: 0, }));",
                type: "d2h-del",
                oldNumber: 14,
                newNumber: null
              },
              {
                content:
                  "+    res.send(JSON.stringify({code: 200, msg: 'ok', data: 0,}));",
                type: "d2h-ins",
                oldNumber: null,
                newNumber: 13
              },
              {
                content: " });",
                type: "d2h-cntx",
                oldNumber: 15,
                newNumber: 14
              },
              { content: " ", type: "d2h-cntx", oldNumber: 16, newNumber: 15 },
              {
                content:
                  " router.get('/checkUserInfo', function (req, res, next) {",
                type: "d2h-cntx",
                oldNumber: 17,
                newNumber: 16
              }
            ],
            oldStartLine: "7",
            oldStartLine2: null,
            newStartLine: "7",
            header: "@@ -7,11 +7,10 @@ const productCode = config.productCode;"
          },
          {
            lines: [
              {
                content: "     var token = params.token;",
                type: "d2h-cntx",
                oldNumber: 20,
                newNumber: 19
              },
              {
                content: "     var uid = params.uid;",
                type: "d2h-cntx",
                oldNumber: 21,
                newNumber: 20
              },
              {
                content: "     if (!token) {",
                type: "d2h-cntx",
                oldNumber: 22,
                newNumber: 21
              },
              {
                content:
                  "-        res.send(JSON.stringify({ code: 200, msg: 'token不能为空', data: false, }));",
                type: "d2h-del",
                oldNumber: 23,
                newNumber: null
              },
              {
                content:
                  "+        res.send(JSON.stringify({code: 200, msg: 'token不能为空', data: false,}));",
                type: "d2h-ins",
                oldNumber: null,
                newNumber: 22
              },
              {
                content: "         return;",
                type: "d2h-cntx",
                oldNumber: 24,
                newNumber: 23
              },
              {
                content: "     }",
                type: "d2h-cntx",
                oldNumber: 25,
                newNumber: 24
              },
              {
                content: "     if (!uid) {",
                type: "d2h-cntx",
                oldNumber: 26,
                newNumber: 25
              },
              {
                content:
                  "-        res.send(JSON.stringify({ code: 200, msg: 'uid不能为空', data: false, }));",
                type: "d2h-del",
                oldNumber: 27,
                newNumber: null
              },
              {
                content:
                  "+        res.send(JSON.stringify({code: 200, msg: 'uid不能为空', data: false,}));",
                type: "d2h-ins",
                oldNumber: null,
                newNumber: 26
              },
              {
                content: "         return;",
                type: "d2h-cntx",
                oldNumber: 28,
                newNumber: 27
              },
              {
                content: "     }",
                type: "d2h-cntx",
                oldNumber: 29,
                newNumber: 28
              },
              {
                content: "     var product_code = '';",
                type: "d2h-cntx",
                oldNumber: 30,
                newNumber: 29
              }
            ],
            oldStartLine: "20",
            oldStartLine2: null,
            newStartLine: "19",
            header:
              "@@ -20,11 +19,11 @@ router.get('/checkUserInfo', function (req, res, next) {"
          },
          {
            lines: [
              {
                content: "             const data = response.data;",
                type: "d2h-cntx",
                oldNumber: 36,
                newNumber: 35
              },
              {
                content:
                  '             console.log("checkUserAction#data=" + data);',
                type: "d2h-cntx",
                oldNumber: 37,
                newNumber: 36
              },
              {
                content: "             if (SUC == data) {",
                type: "d2h-cntx",
                oldNumber: 38,
                newNumber: 37
              },
              {
                content:
                  "-                res.send(JSON.stringify({ code: 200, msg: '验证用户信息成功', data: true, }));",
                type: "d2h-del",
                oldNumber: 39,
                newNumber: null
              },
              {
                content:
                  "+                res.send(JSON.stringify({code: 200, msg: '验证用户信息成功', data: true,}));",
                type: "d2h-ins",
                oldNumber: null,
                newNumber: 38
              },
              {
                content: "             } else {",
                type: "d2h-cntx",
                oldNumber: 40,
                newNumber: 39
              },
              {
                content:
                  "-                res.send(JSON.stringify({ code: 200, msg: '验证用户信息失败', data: false, }));",
                type: "d2h-del",
                oldNumber: 41,
                newNumber: null
              },
              {
                content:
                  "+                res.send(JSON.stringify({code: 200, msg: '验证用户信息失败', data: false,}));",
                type: "d2h-ins",
                oldNumber: null,
                newNumber: 40
              },
              {
                content: "             }",
                type: "d2h-cntx",
                oldNumber: 42,
                newNumber: 41
              },
              { content: " ", type: "d2h-cntx", oldNumber: 43, newNumber: 42 },
              {
                content: "         })",
                type: "d2h-cntx",
                oldNumber: 44,
                newNumber: 43
              },
              {
                content: "         .catch(function (error) {",
                type: "d2h-cntx",
                oldNumber: 45,
                newNumber: 44
              },
              {
                content: "             // handle error",
                type: "d2h-cntx",
                oldNumber: 46,
                newNumber: 45
              },
              {
                content: "             console.log(error);",
                type: "d2h-cntx",
                oldNumber: 47,
                newNumber: 46
              },
              {
                content:
                  "-            res.send(JSON.stringify({ code: 200, msg: '验证用户信息异常', data: false, }));",
                type: "d2h-del",
                oldNumber: 48,
                newNumber: null
              },
              {
                content:
                  "+            res.send(JSON.stringify({code: 200, msg: '验证用户信息异常', data: false,}));",
                type: "d2h-ins",
                oldNumber: null,
                newNumber: 47
              },
              {
                content: "         })",
                type: "d2h-cntx",
                oldNumber: 49,
                newNumber: 48
              },
              {
                content: "         .then(function () {",
                type: "d2h-cntx",
                oldNumber: 50,
                newNumber: 49
              },
              {
                content: "             // always executed",
                type: "d2h-cntx",
                oldNumber: 51,
                newNumber: 50
              }
            ],
            oldStartLine: "36",
            oldStartLine2: null,
            newStartLine: "35",
            header:
              "@@ -36,16 +35,16 @@ router.get('/checkUserInfo', function (req, res, next) {"
          }
        ],
        deletedLines: 7,
        addedLines: 6,
        isGitDiff: true,
        checksumBefore: "a092639",
        checksumAfter: "b78a9a1",
        mode: "100644",
        oldName: "demo.js",
        language: "js",
        newName: "demo.js",
        isCombined: false
      }
    ];

    $(document).ready(function() {
      var diff2htmlUi = new Diff2HtmlUI({ json: diffJson });

      diff2htmlUi.draw("#diff", {
        inputFormat: "json",
        showFiles: true,
        matching: "lines",
        outputFormat: "side-by-side"
        //outputFormat: "line-by-line"
      });
      //diff2htmlUi.highlightCode("#diff");
    });
  </script>

  <head>
    <body>
      <div id="diff"></div>
    </body>
  </head>
</html>
